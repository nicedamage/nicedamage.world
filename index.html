<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>nicedamage.world</title>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/png" href="favicon.png">
  <meta name="description" content="Personal site for nicedamage." />
  <!-- Open Graph / Twitter (optional) -->
  <meta property="og:title" content="nicedamage.world" />
  <meta property="og:description" content="nicedamage.world" />
  <meta name="twitter:card" content="summary" />


  <!-- SPARKLE CURSOR TAIL -->
  <script type="text/javascript">
    // <![CDATA[

    var colour = "#000000";
    var sparkles = 120;

    /****************************
    *  Tinkerbell Magic Sparkle *
    * (c) 2005 mf2fm web-design *
    *  http://www.mf2fm.com/rv  *
    * DON'T EDIT BELOW THIS BOX *
    ****************************/
    var x = ox = 400;
    var y = oy = 300;
    var swide = 800;
    var shigh = 600;
    var sleft = sdown = 0;
    var tiny = new Array();
    var star = new Array();
    var starv = new Array();
    var starx = new Array();
    var stary = new Array();
    var tinyx = new Array();
    var tinyy = new Array();
    var tinyv = new Array();

    window.onload = function () {
      if (document.getElementById) {
        var i, rats, rlef, rdow;
        for (var i = 0; i < sparkles; i++) {
          var rats = createDiv(3, 3);
          rats.style.visibility = "hidden";
          document.body.appendChild(tiny[i] = rats);
          starv[i] = 0;
          tinyv[i] = 0;
          var rats = createDiv(5, 5);
          rats.style.backgroundColor = "transparent";
          rats.style.visibility = "hidden";
          var rlef = createDiv(1, 5);
          var rdow = createDiv(5, 1);
          rats.appendChild(rlef);
          rats.appendChild(rdow);
          rlef.style.top = "2px";
          rlef.style.left = "0px";
          rdow.style.top = "0px";
          rdow.style.left = "2px";
          document.body.appendChild(star[i] = rats);
        }
        set_width();
        sparkle();
      }
    }

    function sparkle() {
      var c;
      if (x != ox || y != oy) {
        ox = x;
        oy = y;
        for (c = 0; c < sparkles; c++) if (!starv[c]) {
          star[c].style.left = (starx[c] = x) + "px";
          star[c].style.top = (stary[c] = y) + "px";
          star[c].style.clip = "rect(0px, 5px, 5px, 0px)";
          star[c].style.visibility = "visible";
          starv[c] = 50;
          break;
        }
      }
      for (c = 0; c < sparkles; c++) {
        if (starv[c]) update_star(c);
        if (tinyv[c]) update_tiny(c);
      }
      setTimeout("sparkle()", 40);
    }

    function update_star(i) {
      if (--starv[i] == 25) star[i].style.clip = "rect(1px, 4px, 4px, 1px)";
      if (starv[i]) {
        stary[i] += 1 + Math.random() * 3;
        if (stary[i] < shigh + sdown) {
          star[i].style.top = stary[i] + "px";
          starx[i] += (i % 5 - 2) / 5;
          star[i].style.left = starx[i] + "px";
        }
        else {
          star[i].style.visibility = "hidden";
          starv[i] = 0;
          return;
        }
      }
      else {
        tinyv[i] = 50;
        tiny[i].style.top = (tinyy[i] = stary[i]) + "px";
        tiny[i].style.left = (tinyx[i] = starx[i]) + "px";
        tiny[i].style.width = "2px";
        tiny[i].style.height = "2px";
        star[i].style.visibility = "hidden";
        tiny[i].style.visibility = "visible"
      }
    }

    function update_tiny(i) {
      if (--tinyv[i] == 25) {
        tiny[i].style.width = "1px";
        tiny[i].style.height = "1px";
      }
      if (tinyv[i]) {
        tinyy[i] += 1 + Math.random() * 3;
        if (tinyy[i] < shigh + sdown) {
          tiny[i].style.top = tinyy[i] + "px";
          tinyx[i] += (i % 5 - 2) / 5;
          tiny[i].style.left = tinyx[i] + "px";
        }
        else {
          tiny[i].style.visibility = "hidden";
          tinyv[i] = 0;
          return;
        }
      }
      else tiny[i].style.visibility = "hidden";
    }

    document.onmousemove = mouse;
    function mouse(e) {
      set_scroll();
      y = (e) ? e.pageY : event.y + sdown;
      x = (e) ? e.pageX : event.x + sleft;
    }

    function set_scroll() {
      if (typeof (self.pageYOffset) == "number") {
        sdown = self.pageYOffset;
        sleft = self.pageXOffset;
      }
      else if (document.body.scrollTop || document.body.scrollLeft) {
        sdown = document.body.scrollTop;
        sleft = document.body.scrollLeft;
      }
      else if (document.documentElement && (document.documentElement.scrollTop || document.documentElement.scrollLeft)) {
        sleft = document.documentElement.scrollLeft;
        sdown = document.documentElement.scrollTop;
      }
      else {
        sdown = 0;
        sleft = 0;
      }
    }

    window.onresize = set_width;
    function set_width() {
      if (typeof (self.innerWidth) == "number") {
        swide = self.innerWidth;
        shigh = self.innerHeight;
      }
      else if (document.documentElement && document.documentElement.clientWidth) {
        swide = document.documentElement.clientWidth;
        shigh = document.documentElement.clientHeight;
      }
      else if (document.body.clientWidth) {
        swide = document.body.clientWidth;
        shigh = document.body.clientHeight;
      }
    }

    function createDiv(height, width) {
  var div = document.createElement("div");
  div.style.position = "absolute";      // keep absolute for smooth motion
  div.style.height = height + "px";
  div.style.width = width + "px";
  div.style.overflow = "hidden";
  div.style.backgroundColor = colour;
  div.style.zIndex = 100000;            // higher than player
  div.style.pointerEvents = "none";     // don’t block clicks
  return div;
}
    // ]]>
  </script>
</head>

<body>
  <!-- MEDIA PLAYER -->
  <div id="music-player" class="wmp-player">
    <div class="wmp-header">
      <span class="label">now playing:</span>
      <div class="track-marquee">
        <span id="track-title"></span>
      </div>
    </div>
    

    <div class="wmp-visualizer">
      <canvas id="visualizer-canvas"></canvas>
    </div>

    <audio id="audio"></audio>
    <div class="wmp-controls">
      <button id="prev">◀◀</button>
      <button id="play">▶</button>
      <button id="next">▶▶</button>
    
      <input type="range" id="volume" min="0" max="1" step="0.05" value="0.8">
    
      <!-- <div id="progress-container">
        <div id="progress"></div>
      </div> -->
    </div>
  </div>

  <main>
    <section class="text-block">
      <h1>welcome to nice damage world!</h1>
      <br>
      <h2>c'mon in!</h2>
    </section>
    <br>
    <nav>
      <ul class="list">
        <li><span class="text-block"><a href="#">★ project one</a></span></li>
        <br>
        <li><span class="text-block"><a href="#">★ project two</a></span></li>
        <br>
        <li><span class="text-block"><a href="#">★ zines</a></span></li>
        <br>
        <li><span class="text-block"><a href="#">★ about</a></span></li>
      </ul>
    </nav>
  </main>

  <footer><small>© 2026</small></footer>

  <!-- MUSIC PLAYER JS -->
  <script>

  // ===== AUDIO + PLAYER SETUP =====
  const player = document.getElementById("music-player");
  const audio = document.getElementById("audio");
  const playBtn = document.getElementById("play");
  const nextBtn = document.getElementById("next");
  const prevBtn = document.getElementById("prev");
  const volume = document.getElementById("volume");
  const trackTitle = document.getElementById("track-title");

  const canvas = document.getElementById("visualizer-canvas");
  const ctx = canvas.getContext("2d");

  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
  

  // ===== PLAYLIST =====
  const playlist = [
    {
      title: "Aphex Twin – Windowlicker",
      src: "windowlicker.mp3"
    },

    {
      title: "Plush Managements Inc. - Mr. Mailman feat. Bea",
      src: "mr-mailman-feat-bea.mp3"
    }
  ];

  let currentTrack = 0;

  function loadTrack(index) {
    audio.src = playlist[index].src;
    trackTitle.textContent = playlist[index].title;
  }

  loadTrack(currentTrack);

  // ===== AUDIO CONTEXT =====
  const AudioContext = window.AudioContext || window.webkitAudioContext;
  const audioCtx = new AudioContext();
  const source = audioCtx.createMediaElementSource(audio);
  const analyser = audioCtx.createAnalyser();

  analyser.fftSize = 128;

  const bufferLength = analyser.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);

  source.connect(analyser);
  analyser.connect(audioCtx.destination);

  // ===== CONTROLS =====
  playBtn.addEventListener("click", () => {
    if (audio.paused) {
      audioCtx.resume();
      audio.play();
      playBtn.textContent = "❚❚";
      renderVisualizer();
    } else {
      audio.pause();
      playBtn.textContent = "▶";
    }
  });

  nextBtn.addEventListener("click", () => {
    currentTrack = (currentTrack + 1) % playlist.length;
    loadTrack(currentTrack);
    audio.play();
  });

  prevBtn.addEventListener("click", () => {
    currentTrack =
      (currentTrack - 1 + playlist.length) % playlist.length;
    loadTrack(currentTrack);
    audio.play();
  });

  volume.addEventListener("input", () => {
    audio.volume = volume.value;
  });

  const progress = document.getElementById("progress");
audio.addEventListener("timeupdate", () => {
  if (!audio.duration) return;
  const percent = (audio.currentTime / audio.duration) * 100;
  progress.style.width = percent + "%";
});

  audio.addEventListener("ended", () => {
    currentTrack = (currentTrack + 1) % playlist.length;
    loadTrack(currentTrack);
    audio.play();
  });


// ------- VISUALIZER -------
let time = 0;
let energySmoothed = 0;

function renderVisualizer() {
  requestAnimationFrame(renderVisualizer);
  analyser.getByteFrequencyData(dataArray);

  // Liquid fade (not a hard clear)
  ctx.fillStyle = "rgba(0,0,0,0.22)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  const cx = canvas.width / 2;
  const cy = canvas.height / 2;

  // ---- ENERGY ANALYSIS ----
  let low = 0, mid = 0, high = 0;

  for (let i = 0; i < bufferLength; i++) {
    const v = dataArray[i];
    if (i < bufferLength * 0.25) low += v;
    else if (i < bufferLength * 0.6) mid += v;
    else high += v;
  }

  low /= bufferLength * 0.25;
  mid /= bufferLength * 0.35;
  high /= bufferLength * 0.4;

  const energy = (low * 0.5 + mid * 0.35 + high * 0.15) / 255;
  energySmoothed = energySmoothed * 0.9 + energy * 0.1;

  // Silence = no drawing
  if (energySmoothed < 0.015) return;

  // ---- FIELD PARAMETERS ----
  const turbulence = low * 0.004;     // B: motion
  const flowSpeed  = mid * 0.0008;    // B: speed
  const shimmer    = high * 0.002;    // C: color refraction

  time += 0.6 + flowSpeed * 120;

  const pointCount = 70; // high density = no dead zones
  const baseRadius = Math.min(canvas.width, canvas.height) * 0.18;

  ctx.beginPath();

  for (let i = 0; i <= pointCount; i++) {
    const a = (i / pointCount) * Math.PI * 2;

    // Field distortion (NO center anchoring)
    const field =
      Math.sin(a * 3 + time * 0.01) +
      Math.sin(a * 7 - time * 0.008) * 0.6 +
      Math.sin(time * 0.04 + i) * turbulence * 100;

    const r = baseRadius + field * 1 * energySmoothed;

    const x = cx + Math.cos(a) * r;
    const y = cy + Math.sin(a) * r;

    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }

// ---- WMP PLASMA PALETTE ----
const palette = [
  { h: 285, s: 70, l: 55 }, // magenta-violet
  { h: 215, s: 65, l: 55 }, // electric blue
  { h: 185, s: 60, l: 55 }, // cyan-teal
  { h: 245, s: 60, l: 55 }  // indigo
];

// very slow drift through palette
const drift = (Math.sin(time * 0.0015) + 1) / 2;
const idx = Math.floor(drift * (palette.length - 1));
const c1 = palette[idx];
const c2 = palette[(idx + 1) % palette.length];

// interpolate hue (no rainbow sweep)
const hue = 220 + Math.sin(time * 0.0008) * 15;
ctx.strokeStyle = `hsla(${hue}, 60%, 60%, ${0.35 + energySmoothed * 0.2})`;
ctx.lineWidth = 1.6 + energySmoothed * 2;
ctx.shadowColor = `hsla(${hue}, 70%, 65%, 0.6)`;

ctx.stroke();


// thickness reacts to energy
const thickness = 1.4 + energySmoothed * 2.2;

ctx.strokeStyle = `hsla(${hue}, ${c1.s}%, ${c1.l}%, ${0.35 + energySmoothed * 0.25})`;
ctx.lineWidth = thickness;
ctx.shadowColor = `hsla(${hue}, 80%, 60%, 0.5)`;
ctx.stroke();

}


// ===== DRAGGABLE PLAYER =====
let isDragging = false;
let offsetX = 0;
let offsetY = 0;

player.style.position = "fixed";
player.style.cursor = "grab";

player.addEventListener("mousedown", (e) => {
  isDragging = true;
  offsetX = e.clientX - player.offsetLeft;
  offsetY = e.clientY - player.offsetTop;
  player.style.cursor = "grabbing";
});

document.addEventListener("mousemove", (e) => {
  if (!isDragging) return;
  player.style.left = e.clientX - offsetX + "px";
  player.style.top = e.clientY - offsetY + "px";
});

document.addEventListener("mouseup", () => {
  isDragging = false;
  player.style.cursor = "grab";
});

  </script>



</body>



</html>